<!DOCTYPE html>
<html>
<head>
  <title>Vega Lite Bar Chart</title>
  <meta charset="utf-8">

  <script src="https://cdn.jsdelivr.net/npm/vega@3.2.1/build/vega.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@2.3.1/build/vega-lite.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@3.2.0/build/vega-embed.js"></script>

  <style media="screen">
    /* Add space between Vega-Embed links  */
    .vega-actions a {
      margin-right: 5px;
    }
  </style>
</head>
<body>
<h1>Template for Embedding Vega-Lite Visualization</h1>
<!-- Container for the visualization -->
<div id="vis"></div>

<script>
    // Assign the specification to a local variable vlSpec.
    var vlSpec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
        "description": "A dashboard with cross-highlighting.",
        "data": {"url": "data/movies.json"},
        "vconcat": [
            {
                "layer": [{
                    "mark": "rect",
                    "encoding": {
                        "x": {
                            "bin": {"maxbins": 10},
                            "field": "IMDB_Rating",
                            "type": "quantitative"
                        },
                        "y": {
                            "bin": {"maxbins": 10},
                            "field": "Rotten_Tomatoes_Rating",
                            "type": "quantitative"
                        },
                        "color": {
                            "aggregate": "count",
                            "type": "quantitative",
                            "legend": {
                                "title": "All Movies"
                            }
                        }
                    }
                }, {
                    "transform": [{
                        "filter": {"selection": "pts"}
                    }],
                    "mark": "point",
                    "encoding": {
                        "x": {
                            "bin": {"maxbins": 10},
                            "field": "IMDB_Rating",
                            "type": "quantitative"
                        },
                        "y": {
                            "bin": {"maxbins": 10},
                            "field": "Rotten_Tomatoes_Rating",
                            "type": "quantitative"
                        },
                        "size": {
                            "aggregate": "count",
                            "type": "quantitative",
                            "legend": {
                                "title": "In Selected Category"
                            }
                        },
                        "color": {
                            "value": "#666"
                        }
                    }
                }]
            }, {
                "width": 330,
                "height": 120,
                "mark": "bar",
                "selection": {
                    "pts": {"type": "single", "encodings": ["x"]}
                },
                "encoding": {
                    "x": {"field": "Major_Genre", "type": "nominal", "axis": {"labelAngle": -40}},
                    "y": {"aggregate": "count", "type": "quantitative"},
                    "color": {
                        "condition": {
                            "selection": "pts",
                            "value": "steelblue"
                        },
                        "value": "grey"
                    }
                }
            }
        ],
        "resolve": {
            "legend": {
                "color": "independent",
                "size": "independent"
            }
        },
        "config": {
            "range": {
                "heatmap": {
                    "scheme": "greenblue"
                }
            }
        }
    };

    // Embed the visualization in the container with id `vis`
    vegaEmbed("#vis", vlSpec);
</script>
</body>
</html>
</html>